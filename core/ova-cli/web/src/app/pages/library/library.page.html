<!-- Wrapper: vertical stack on mobile, horizontal split on desktop -->
<div class="flex flex-col lg:flex-row w-full">
  <!-- Mobile Folder Tree (scrolls with content) -->
  <div class="bg-base-100 border-b border-base-200 lg:hidden">
    <aside class="p-4">
      <app-tree-view [currentFolder]="currentFolder" (folderSelected)="onFolderSelected($event)"
        class="w-full"></app-tree-view>
    </aside>
  </div>

  <div class=" flex h-[calc(100vh-56px)] overflow-hidden w-full ">

    <!-- Desktop Folder Tree: Fixed and offset beside main sidebar and below top navbar -->
    <div class="hidden lg:block bg-base-100 w-128 sticky  overflow-y-auto z-30  border-base-200">
      <aside class="p-4">
        <app-tree-view [currentFolder]="currentFolder" (folderSelected)="onFolderSelected($event)"
          class="w-full"></app-tree-view>
      </aside>
    </div>

    <!-- Main Content (with left margin to clear both sidebars) -->
    <div class="flex flex-col flex-grow w-full overflow-auto">
      <div class="flex justify-between items-center gap-6 p-6 px-20 bg-base-200">

        <div class="flex items-center gap-5">

          <!-- Avatar Section -->
          <div class="avatar avatar-placeholder">
            <div class="bg-neutral text-neutral-content w-24 rounded-full">
              <span class="text-3xl">{{ SpaceSelected ? SpaceSelected.charAt(0) : '' }}</span>
            </div>
          </div>

          <!-- Content Section -->
          <div class="flex flex-col space-y-2">
            <span class="text-xl font-semibold ">{{ SpaceSelected }}</span>
            <div class="text-sm  flex items-center gap-2">
              <span id="spaceId">#sdkfjs23kdsflkjdsf</span>
              <button class="text-primary text-xs flex items-center gap-1" (click)="copySpaceId()"
                [attr.aria-label]="copyButtonLabel">
                <i class="bx bx-copy"></i>
                <span *ngIf="!copied">Copy</span>
                <span *ngIf="copied">Copied!</span>
              </button>
            </div>
          </div>
        </div>

        <a href="#" class="text-primary hover:underline text-sm">More</a>
      </div>



      <div>
        <!-- Search Bar -->
        <app-search-bar [(value)]="searchTerm" (valueChange)="setSearchTerm($event)" placeholder="Local Search ..."
          class="mb-6"></app-search-bar>

        <!-- Top Pagination -->
        <div class="flex justify-center mb-5" *ngIf="totalPages > 1 && !loading">
          <div class="join">
            <input *ngFor="let page of [].constructor(totalPages); let i = index" class="join-item btn btn-square"
              type="radio" name="paginationTop" [attr.aria-label]="i + 1" [checked]="currentPage === i + 1"
              (change)="goToPage(i + 1)" />
          </div>
        </div>

        <!-- Sort & Count -->
        <div class="flex justify-between items-center gap-4 mb-6 max-w-7xl mx-auto px-4">
          <div class="font-medium text-base-content">
            Total videos: {{ filteredVideosCount }}
          </div>
          <div class="flex items-center gap-2">
            <label for="sort" class="text-sm font-medium">Sort by:</label>
            <select id="sort" [(ngModel)]="sortOption" (change)="setSortOption(sortOption)"
              class="select select-sm select-bordered w-44">
              <option value="titleAsc">Title (A–Z)</option>
              <option value="titleDesc">Title (Z–A)</option>
              <option value="durationAsc">Duration (Short → Long)</option>
              <option value="durationDesc">Duration (Long → Short)</option>
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
            </select>
          </div>
        </div>

        <!-- Videos Grid -->
        <div class="mx-auto px-4 flex-grow w-full">
          <p *ngIf="loading" class="font-medium text-center">Loading videos...</p>
          <app-gallery-view *ngIf="!loading" [videos]="videos"></app-gallery-view>
        </div>

        <!-- Bottom Pagination -->
        <div class="flex justify-center mt-6" *ngIf="totalPages > 1 && !loading">
          <div class="join">
            <input *ngFor="let page of [].constructor(totalPages); let i = index" class="join-item btn btn-square"
              type="radio" name="paginationBottom" [attr.aria-label]="i + 1" [checked]="currentPage === i + 1"
              (change)="goToPage(i + 1)" />
          </div>
        </div>
      </div>
    </div>

  </div>
</div>