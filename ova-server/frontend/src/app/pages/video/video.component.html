<app-top-nav-bar
  [title]="'Videos'"
></app-top-nav-bar>

<app-search-bar
  [(value)]="searchTerm"
  placeholder="Search videos..."
></app-search-bar>

<!-- Folder Tree -->
<div class="max-w-7xl mx-auto px-4 flex items-center mt-4" style="height: 10rem;">
  <div class="w-64">
    <app-folder-tree
      [folders]="folders"
      [currentFolder]="currentFolder"
      (folderSelected)="onFolderSelected($event)"
    ></app-folder-tree>
  </div>
  <div class="flex-1"></div>
</div>

<!-- Sort Menu -->
<div class="max-w-7xl mx-auto px-4 mt-2 flex justify-end items-center gap-2">
  <label for="sort" class="text-sm text-gray-700 font-medium">Sort by:</label>
  <select
    id="sort"
    [(ngModel)]="sortOption"
    class="select select-sm select-bordered w-40"
  >
    <option value="titleAsc">Title (A–Z)</option>
    <option value="titleDesc">Title (Z–A)</option>
    <option value="durationAsc">Duration (Short → Long)</option>
    <option value="durationDesc">Duration (Long → Short)</option>
  </select>
</div>

<!-- Collections Dropdown -->
<div class="max-w-7xl mx-auto px-4 mt-4 flex justify-end relative">

  <ul
    *ngIf="isCollectionsDropdownOpen"
    class="absolute right-0 mt-12 w-64 bg-white border rounded shadow z-50 max-h-80 overflow-auto"
  >
    <li
      *ngFor="let playlist of playlists"
      (click)="selectPlaylist(playlist)"
      class="p-2 hover:bg-gray-100 cursor-pointer"
    >
      <div class="font-medium">{{ playlist.title }}</div>
      <div class="text-sm text-gray-500">{{ playlist.description }}</div>
    </li>
    <li *ngIf="playlists.length === 0" class="p-2 text-gray-500">
      No collections found.
    </li>
  </ul>
</div>


<!-- Videos Block -->
<div class="max-w-7xl mx-auto px-4 mt-6">
  <p *ngIf="loading" class="text-gray-700 font-medium text-center">Loading videos...</p>

  <app-video-grid
    *ngIf="!loading"
    [videos]="filteredVideos"
    [getThumbnailUrl]="getThumbnailUrl.bind(this)"
    [getPreviewUrl]="getPreviewUrl.bind(this)"
  ></app-video-grid>
</div>
