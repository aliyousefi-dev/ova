<a [routerLink]="['/watch', videoId]" class="block h-full w-full">
  <div
    class="h-full flex flex-col bg-base-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer rounded-lg overflow-hidden"
    (mouseenter)="hovering = true"
    (mouseleave)="hovering = false"
  >
    <figure class="relative w-full h-40 bg-gray-200">
      <img
        [src]="thumbnailUrl"
        [alt]="title"
        class="w-full h-full object-cover absolute top-0 left-0 transition-opacity duration-200"
        [class.opacity-0]="hovering"
        [class.opacity-100]="!hovering"
      />
      <video
        [src]="previewUrl"
        autoplay
        muted
        loop
        playsinline
        class="w-full h-full object-cover absolute top-0 left-0 transition-opacity duration-200"
        [class.opacity-100]="hovering"
        [class.opacity-0]="!hovering"
      ></video>

      <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded">
        {{ formatDuration(duration) }}
      </div>
    </figure>

    <div class="flex flex-col justify-between flex-grow p-4">
      <h2 class="text-base font-semibold line-clamp-2 leading-snug">{{ title }}</h2>
      <div class="flex flex-wrap gap-1 mt-2">
        <span *ngFor="let tag of tags" class="badge badge-outline badge-sm">
          {{ tag }}
        </span>
      </div>
    </div>
  </div>
</a>
